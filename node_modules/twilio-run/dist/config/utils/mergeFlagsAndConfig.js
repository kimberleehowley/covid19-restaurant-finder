"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const lodash_kebabcase_1 = __importDefault(require("lodash.kebabcase"));
function mergeFlagsAndConfig(config, flags, cliInfo) {
    const mergedResult = Object.keys(flags).reduce((result, key) => {
        let value = flags[key];
        const opt = cliInfo.options[lodash_kebabcase_1.default(key)];
        const arg = cliInfo.argsDefaults && cliInfo.argsDefaults[lodash_kebabcase_1.default(key)];
        if ((opt && opt.default === value) || arg) {
            if (typeof config[key] !== 'undefined') {
                value = config[key];
            }
        }
        return Object.assign(Object.assign({}, result), { [key]: value });
    }, Object.assign({}, config));
    if (typeof config.cwd === 'string' &&
        config.cwd !== process.cwd() &&
        flags.cwd === process.cwd()) {
        mergedResult.cwd = config.cwd;
    }
    return mergedResult;
}
exports.mergeFlagsAndConfig = mergeFlagsAndConfig;
